# MongoDB Authentication & Authorization - Learning Notes

## Overview

MongoDB uses a comprehensive security model based on two fundamental concepts: **Authentication** and **Authorization**. These work together to control who can access the database and what they can do once connected.

## Key Concepts

### Authentication vs Authorization

**Authentication** - Identifying users in your database

- Who are you?
- Like having a key card to enter an office building
- Proves you are a legitimate user
  **Authorization** - Determining what authenticated users can do

- What are you allowed to do?
- Like your role determining which systems you can access in the office
- Controls permissions and actions

### Real-World Analogy

Think of an office building:

- **Authentication**: Your employee key card gets you into the building
- **Authorization**: Your role (accountant, manager, etc.) determines which floors, systems, and resources you can access

## Important Distinctions

### Database Users vs Application Users

**Database Users** (what we're discussing):

- People or applications that directly connect to MongoDB server
- Data analysts using MongoDB shell
- Applications using MongoDB drivers
- NOT the end users of your application
  **Application Users** (different concept):

- Users who sign up for your shop/app
- Managed by your application logic
- Cannot directly interact with MongoDB
- Cannot insert/delete documents directly

## MongoDB's Role-Based Access Control (RBAC)

### System Architecture

```
MongoDB Server
├── admin (special database - exists by default)
├── config (system database)
├── local (system database)
├── shop (custom database)
│   ├── products (collection)
│   └── orders (collection)
└── blog (custom database)
    ├── posts (collection)
    └── comments (collection)
```

### How RBAC Works

1.  **Enable Authentication**
    - MongoDB server requires authentication for all interactions
    - No anonymous access allowed
2.  **User Login Process**
    - Users must provide username and password
    - Users must exist on MongoDB server first
3.  **Role Assignment**
    - Authenticated users are assigned roles
    - Roles contain groups of privileges

### Privileges System

**Privilege = Resource + Action**

- **Resource**: What you're acting on (e.g., products collection in shop database)
- **Action**: What you want to do (e.g., insert, read, update, delete)
  **Example Privilege:**

- Resource: `shop.products` collection
- Action: `insert`
- Result: Can insert documents into the products collection in the shop database

### Roles

- **Roles** group multiple privileges together
- Users are assigned roles rather than individual privileges
- Makes permission management more organized and scalable
  **Example Role Structure:**

```
Data Analyst Role:
├── Privilege 1: Read from shop.products
├── Privilege 2: Read from shop.orders
└── Privilege 3: Read from blog.posts

App User Role:
├── Privilege 1: Insert into shop.products
├── Privilege 2: Update shop.orders
├── Privilege 3: Read from shop.products
└── Privilege 4: Delete from shop.orders
```

## Security Principles

### Principle of Least Privilege

- Give users only the minimum permissions they need
- Prevents accidental damage or malicious actions
- Reduces security risks
  **Examples:**

- Data analyst only needs read access, not write/delete
- Backup service only needs read access to all databases
- Application might need full CRUD on specific collections only

### Why This Matters

1.  **Prevents Accidents**: Users can't accidentally delete important data
2.  **Security**: Limits damage if credentials are compromised
3.  **Compliance**: Many regulations require access controls
4.  **Auditability**: Clear tracking of who can do what

## Special Databases

### Admin Database

- Exists by default in every MongoDB instance
- Special significance in authentication system
- Used for storing user accounts and roles
- Required for certain administrative operations

## Next Steps

The authentication system must be:

1.  **Enabled** on the MongoDB server
2.  **Configured** with user accounts
3.  **Assigned** appropriate roles to users

This flexible model allows database administrators to create multiple users with precisely the permissions each user or application needs, following security best practices.
